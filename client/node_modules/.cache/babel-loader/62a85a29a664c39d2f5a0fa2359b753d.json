{"ast":null,"code":"import _regeneratorRuntime from \"/home/manjam/Portfolio/journal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/manjam/Portfolio/journal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/manjam/Portfolio/journal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/manjam/Portfolio/journal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/manjam/Portfolio/journal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/manjam/Portfolio/journal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/manjam/Portfolio/journal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/manjam/Portfolio/journal/src/components/GoogleSignIn.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { signIn, signOut } from '../actions';\n\nvar GoogleSignIn = /*#__PURE__*/function (_React$Component) {\n  _inherits(GoogleSignIn, _React$Component);\n\n  function GoogleSignIn() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, GoogleSignIn);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(GoogleSignIn)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.onSignInClick = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!_this.authInstance) {\n                _context.next = 3;\n                break;\n              }\n\n              _context.next = 3;\n              return _this.authInstance.signIn();\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    _this.onSignOutClick = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!_this.authInstance) {\n                _context2.next = 3;\n                break;\n              }\n\n              _context2.next = 3;\n              return _this.authInstance.signOut();\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    _this.onSignInChange = function (isSignedIn) {\n      if (isSignedIn) {\n        _this.props.signIn(_this.authInstance.currentUser.get().getBasicProfile());\n      } else {\n        _this.props.signOut();\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(GoogleSignIn, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      window.gapi.load('auth2', function () {\n        window.gapi.auth2.init({\n          client_id: '299170523315-95a9l5qcn65k3oiatcd488kcvgul6dl9.apps.googleusercontent.com',\n          scope: 'email'\n        }).then(function () {\n          _this2.authInstance = window.gapi.auth2.getAuthInstance();\n\n          _this2.onSignInChange(_this2.authInstance.isSignedIn.get());\n\n          _this2.authInstance.isSignedIn.listen(function () {\n            _this2.onSignInChange(_this2.authInstance.isSignedIn.get());\n          });\n        });\n      });\n    }\n  }, {\n    key: \"renderSignInButton\",\n    value: function renderSignInButton() {\n      if (this.props.user.signedIn) {\n        return /*#__PURE__*/React.createElement(\"button\", {\n          onClick: this.onSignOutClick,\n          className: \"ui transparent button red\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 5\n          }\n        }, /*#__PURE__*/React.createElement(\"i\", {\n          className: \"fab fa-google\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 6\n          }\n        }), \" Sign Out\");\n      } else {\n        return /*#__PURE__*/React.createElement(\"button\", {\n          onClick: this.onSignInClick,\n          className: \"ui transparent button green\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 5\n          }\n        }, /*#__PURE__*/React.createElement(\"i\", {\n          className: \"fab fa-google\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 6\n          }\n        }), \" Sign in\");\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 10\n        }\n      }, this.renderSignInButton());\n    }\n  }]);\n\n  return GoogleSignIn;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state, ownProps) {\n  return {\n    user: state.user\n  };\n};\n\nexport default connect(mapStateToProps, {\n  signIn: signIn,\n  signOut: signOut\n})(GoogleSignIn);","map":{"version":3,"sources":["/home/manjam/Portfolio/journal/src/components/GoogleSignIn.js"],"names":["React","connect","signIn","signOut","GoogleSignIn","onSignInClick","authInstance","onSignOutClick","onSignInChange","isSignedIn","props","currentUser","get","getBasicProfile","window","gapi","load","auth2","init","client_id","scope","then","getAuthInstance","listen","user","signedIn","renderSignInButton","Component","mapStateToProps","state","ownProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\n\nimport { signIn, signOut } from '../actions';\n\nclass GoogleSignIn extends React.Component {\n\tcomponentDidMount() {\n\t\twindow.gapi.load('auth2', () => {\n\t\t\twindow.gapi.auth2\n\t\t\t\t.init({\n\t\t\t\t\tclient_id :\n\t\t\t\t\t\t'299170523315-95a9l5qcn65k3oiatcd488kcvgul6dl9.apps.googleusercontent.com',\n\t\t\t\t\tscope     : 'email'\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.authInstance = window.gapi.auth2.getAuthInstance();\n\t\t\t\t\tthis.onSignInChange(this.authInstance.isSignedIn.get());\n\t\t\t\t\tthis.authInstance.isSignedIn.listen(() => {\n\t\t\t\t\t\tthis.onSignInChange(this.authInstance.isSignedIn.get());\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t});\n\t}\n\n\tonSignInClick = async () => {\n\t\tif (this.authInstance) {\n\t\t\tawait this.authInstance.signIn();\n\t\t}\n\t};\n\n\tonSignOutClick = async () => {\n\t\tif (this.authInstance) {\n\t\t\tawait this.authInstance.signOut();\n\t\t}\n\t};\n\n\tonSignInChange = (isSignedIn) => {\n\t\tif (isSignedIn) {\n\t\t\tthis.props.signIn(\n\t\t\t\tthis.authInstance.currentUser.get().getBasicProfile()\n\t\t\t);\n\t\t} else {\n\t\t\tthis.props.signOut();\n\t\t}\n\t};\n\n\trenderSignInButton() {\n\t\tif (this.props.user.signedIn) {\n\t\t\treturn (\n\t\t\t\t<button\n\t\t\t\t\tonClick={this.onSignOutClick}\n\t\t\t\t\tclassName=\"ui transparent button red\"\n\t\t\t\t>\n\t\t\t\t\t<i className=\"fab fa-google\" /> Sign Out\n\t\t\t\t</button>\n\t\t\t);\n\t\t} else {\n\t\t\treturn (\n\t\t\t\t<button\n\t\t\t\t\tonClick={this.onSignInClick}\n\t\t\t\t\tclassName=\"ui transparent button green\"\n\t\t\t\t>\n\t\t\t\t\t<i className=\"fab fa-google\" /> Sign in\n\t\t\t\t</button>\n\t\t\t);\n\t\t}\n\t}\n\n\trender() {\n\t\treturn <React.Fragment>{this.renderSignInButton()}</React.Fragment>;\n\t}\n}\n\nconst mapStateToProps = (state, ownProps) => {\n\treturn { user: state.user };\n};\n\nexport default connect(mapStateToProps, { signIn, signOut })(GoogleSignIn);\n"]},"metadata":{},"sourceType":"module"}